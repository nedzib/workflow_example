<section class="space-y-6">
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-2xl font-semibold text-slate-900"><%= @user.email %></h2>
      <p class="text-sm text-slate-600">Creado el <%= l @user.created_at, format: :long %></p>
    </div>
    <%= link_to "Volver", users_path, class: "rounded bg-slate-200 px-4 py-2 text-sm font-semibold text-slate-700" %>
  </div>

  <section>
    <h3 class="text-lg font-semibold text-slate-800 mb-2">Progreso del workflow</h3>
    <% if @operations.any? %>
      <ol class="space-y-3">
        <% @operations.each do |operation| %>
          <li class="rounded border border-slate-200 bg-white p-4 shadow-sm">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-base font-medium text-slate-900"><%= operation.title %></p>
                <p class="text-sm text-slate-600">
                  Estado: <span class="font-semibold"><%= operation.state.humanize %></span>
                </p>
                <% if operation.context.present? %>
                  <pre class="mt-2 overflow-x-auto rounded bg-slate-50 p-2 text-xs text-slate-700"><%= JSON.pretty_generate(operation.context) %></pre>
                <% end %>
              </div>
              <div class="space-y-2 text-right">
                <%= link_to "Ver", operation_path(operation), class: "inline-block rounded bg-blue-600 px-3 py-1 text-xs font-semibold text-white" %>
                <% if operation.state == RailsWorkflow::Operation::STATE_RUNNING %>
                  <%= button_to "Completar", complete_operation_path(operation), method: :post, class: "inline-block rounded bg-green-600 px-3 py-1 text-xs font-semibold text-white" %>
                <% end %>
              </div>
            </div>
          </li>
        <% end %>
      </ol>
    <% else %>
      <p class="rounded border border-slate-200 bg-white p-4 text-sm text-slate-600">AÃºn no hay operaciones asociadas a este usuario.</p>
    <% end %>
  </section>
</section>
